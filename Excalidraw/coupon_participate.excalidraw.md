---

excalidraw-plugin: parsed
tags: [excalidraw]

---
==⚠  Switch to EXCALIDRAW VIEW in the MORE OPTIONS menu of this document. ⚠== You can decompress Drawing data with the command palette: 'Decompress current Excalidraw file'. For more info check in plugin settings under 'Saving'


# Excalidraw Data

## Text Elements
LB ^mGO7DCKW

WAS ^bsWoPUIv

WAS ^osMX8Xre

inmemory queue ^pkphdoYx

inmemory queue ^zup2lTP3

Redis ^QXkoTDQM

Redis ^EdGw6XHx

1. 사용자가 쿠폰 이벤트 참여를 신청한다.
2. LB는 WAS 둘중 하나로 로드밸런싱한다.
3. WAS는 우선 1번 Redis로 요청을 해서 사용자의 중복 참여 여부를 검증한다. ^mPYw5F5V

1 ^HAhD4PHZ

3-1. 사용자 중복 참여 여부 검증은 Redis bitmap 사용
  ^AcKbTLMH

%%
## Drawing
```compressed-json
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
```
%%